{% extends "base.html" %}
{% import 'bootstrap/wtf.html' as wtf %}

{% block app_content %}
<title>Results Database</title>
<div class="container">
	<div class="row">
		<div class="col-xs-3">
			<table class ="table table-striped">
				<thead>
					<th scope="col">Note</th>
					<th scope="col">Amount</th>
					<th scope="col">Date</th>
				</thead>
				<tbody>
				{% for transaction in iTrans %}
				<tr>
					<td>{{ transaction.note }}</td>
					<td>{{ '$'+'{:.2f}'.format(transaction.amount) }}</td>
					<td>{{ transaction.timestamp }}</td>
				</tr>
				{% endfor %}
				<tr>Total: {{ '$'+'{:.2f}'.format(itotal)}}</tr>
				</tbody>
			</table>
		</div>
		<div class="col-xs-6">
			<table class ="table table-striped">
				<thead>
					<th scope="col">Note</th>
					<th scope="col">Amount</th>
					<th scope="col">Category</th>
					<th scope="col">Date</th>
				</thead>
				<tbody>
			{% for transaction in allTrans %}
				<tr>
					<td>{{ transaction.note }}</td>
					<td>{{ '$'+'{:.2f}'.format(transaction.amount) }}</td>
					<td><a href="{{ url_for('results',category=transaction.category) }}">{{ transaction.category }}</a></td>
					<td>{{ transaction.timestamp }}</td>
				</tr>
			{% endfor %}
				<tr>Total: {{ '$'+'{:.2f}'.format(total)}}</tr>
				</tbody>
			</table>
		</div>
		<div class="col-xs-3">
			<table class ="table table-sm">
				<tbody>
				<tr>
					<td>
						<div class="dropdown show">
							  <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Category</a>

							  <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
								<a class="dropdown-item" href="{{ url_for('results',category='all') }}">All</a><br>
								{% for item in loc %}
								<a class="dropdown-item" href="{{ url_for('results',category=item[0]) }}">{{ item[1] }}</a><br>
								{% endfor %}
							  </div>
						</div>
					</td>
				</tr>
				<tr>
					<td>
					{{ wtf.form_field(form.dtstart,class_='datepicker') }}
					</td>
				</tr>
				</tbody>
			</table>
		</div>
	</div>
</div>

{% endblock %}